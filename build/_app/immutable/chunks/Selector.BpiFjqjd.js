import{s as mt,D as Le,E as He,a as I,d as h,f as v,i as O,g as y,n as ve,y as ht,A as pt,j as fe,p as vt,F as bt,q as wt,k as L,o as H,e as M,c as D,r as kt,v as yt,w as $t,x as Et,Q as be,t as Y,b as J,h as te,B as We,u as ce,H as Mt,N as we,a0 as Ze}from"./scheduler.DuUlakQd.js";import{S as gt,i as _t,f as Dt,b as Q,d as K,m as X,t as E,a as z,e as x,g as ae,c as ne}from"./index.Ys3_BkIn.js";import{e as re}from"./each.Dt38hqwP.js";import"./updater.PszAV25u.js";import{M as Ct,a as Vt,b as It}from"./menu-trigger.Dk14uO_q.js";import{m as qe}from"./marked.esm._0_gBwjO.js";import{F as Nt}from"./fuse.CU2r43ac.js";import{f as Tt}from"./index.BFuekP1B.js";import{C as zt}from"./ChevronDown.CwxqFfSg.js";import{C as Ot}from"./Check.BKW1UgYC.js";import{S as St}from"./Search.CkUbmifm.js";import{g as At,p as Bt,d as Pt}from"./index.B6ItjCT7.js";import{M as ge,a as jt,c as Lt,n as Ht,i as Wt,u as Zt,o as Ue,m as qt}from"./index.1_Kto-1t.js";import{t as ue}from"./Toaster.svelte_svelte_type_style_lang.DyiqXpXd.js";import{s as Ut,f as Fe}from"./index.DJ9SJzeG.js";import{g as Ft}from"./index.BoEvUtch.js";import{T as de}from"./Tooltip.CTp4haHe.js";import{S as Gt}from"./Switch.DK4Duy3T.js";import{g as Rt}from"./entry.3edTByIC.js";const Yt=a=>{if(!a||typeof a.name!="string")return console.error("isModelConfidential: Invalid model provided:",a),!1;if(a.name.startsWith("non-confidential"))return!1;if(a.name.startsWith("confidential"))return!0;console.error("isModelConfidential: Unable to determine confidentiality from model name:",a.name)},Al=(a,e)=>{if(!a||typeof a.name!="string")return console.error("extractModelName: Invalid model provided:",a),"";let t=a.name,l;return typeof e=="boolean"?(l=e,t=l?t.replace(/^confidential\.?/,""):t.replace(/^non-confidential\.?/,"")):t.startsWith("confidential")?(l=!0,t=t.replace(/^confidential\.?/,"")):t.startsWith("non-confidential")?(l=!1,t=t.replace(/^non-confidential\.?/,"")):(console.warn("extractModelName: Model name does not have a confidentiality prefix:",t),l=!1),t=t.trim(),l&&(t=`ðŸ”’ ${t}`),t};function Jt(a){let e,t;return{c(){e=Le("svg"),t=Le("path"),this.h()},l(l){e=He(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=I(e);t=He(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),I(t).forEach(h),n.forEach(h),this.h()},h(){v(t,"stroke-linecap","round"),v(t,"stroke-linejoin","round"),v(t,"d","M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"stroke-width",a[1]),v(e,"stroke","currentColor"),v(e,"class",a[0])},m(l,n){O(l,e,n),y(e,t)},p(l,[n]){n&2&&v(e,"stroke-width",l[1]),n&1&&v(e,"class",l[0])},i:ve,o:ve,d(l){l&&h(e)}}}function Qt(a,e,t){let{className:l="size-4"}=e,{strokeWidth:n="1.5"}=e;return a.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,n=o.strokeWidth)},[l,n]}class Kt extends gt{constructor(e){super(),_t(this,e,Qt,Jt,mt,{className:0,strokeWidth:1})}}function Ge(a,e,t){const l=a.slice();return l[44]=e[t],l}function Re(a,e,t){const l=a.slice();return l[47]=e[t],l[49]=t,l}function Ye(a,e,t){const l=a.slice();return l[50]=e[t],l}function Je(a,e,t){const l=a.slice();return l[50]=e[t],l}function Qe(a,e,t){const l=a.slice();return l[50]=e[t],l}function Xt(a){let e;return{c(){e=Y(a[2])},l(t){e=J(t,a[2])},m(t,l){O(t,e,l)},p(t,l){l[0]&4&&te(e,t[2])},d(t){t&&h(e)}}}function xt(a){let e=a[13].label+"",t;return{c(){t=Y(e)},l(l){t=J(l,e)},m(l,n){O(l,t,n)},p(l,n){n[0]&8192&&e!==(e=l[13].label+"")&&te(t,e)},d(l){l&&h(t)}}}function el(a){let e,t,l,n,o;function r(d,c){return d[13]?xt:Xt}let u=r(a),s=u(a);return l=new zt({props:{className:" self-center ml-2 size-3",strokeWidth:"2.5"}}),{c(){e=M("div"),s.c(),t=L(),Q(l.$$.fragment),this.h()},l(d){e=D(d,"DIV",{class:!0});var c=I(e);s.l(c),t=H(c),K(l.$$.fragment,c),c.forEach(h),this.h()},h(){v(e,"class",n="flex w-full text-left px-0.5 outline-hidden bg-transparent truncate "+a[7]+" justify-between font-medium placeholder-gray-400 focus:outline-hidden")},m(d,c){O(d,e,c),s.m(e,null),y(e,t),X(l,e,null),o=!0},p(d,c){u===(u=r(d))&&s?s.p(d,c):(s.d(1),s=u(d),s&&(s.c(),s.m(e,t))),(!o||c[0]&128&&n!==(n="flex w-full text-left px-0.5 outline-hidden bg-transparent truncate "+d[7]+" justify-between font-medium placeholder-gray-400 focus:outline-hidden"))&&v(e,"class",n)},i(d){o||(E(l.$$.fragment,d),o=!0)},o(d){z(l.$$.fragment,d),o=!1},d(d){d&&h(e),s.d(),x(l)}}}function Ke(a){let e,t,l,n,o,r,u;return t=new St({props:{className:"size-4",strokeWidth:"2.5"}}),{c(){e=M("div"),Q(t.$$.fragment),l=L(),n=M("input"),this.h()},l(s){e=D(s,"DIV",{class:!0});var d=I(e);K(t.$$.fragment,d),l=H(d),n=D(d,"INPUT",{id:!0,class:!0,placeholder:!0,autocomplete:!0}),d.forEach(h),this.h()},h(){v(n,"id","model-search-input"),v(n,"class","w-full text-sm bg-transparent outline-hidden"),v(n,"placeholder",a[4]),v(n,"autocomplete","off"),v(e,"class","flex items-center gap-2.5 px-5 mt-3.5 mb-1.5")},m(s,d){O(s,e,d),X(t,e,null),y(e,l),y(e,n),We(n,a[8]),o=!0,r||(u=[ce(n,"input",a[28]),ce(n,"keydown",a[29])],r=!0)},p(s,d){(!o||d[0]&16)&&v(n,"placeholder",s[4]),d[0]&256&&n.value!==s[8]&&We(n,s[8])},i(s){o||(E(t.$$.fragment,s),o=!0)},o(s){z(t.$$.fragment,s),o=!1},d(s){s&&h(e),x(t),r=!1,Mt(u)}}}function Xe(a){let e,t,l,n=a[18].t("All")+"",o,r,u,s,d,c=re(a[12]),p=[];for(let g=0;g<c.length;g+=1)p[g]=xe(Qe(a,c,g));return{c(){e=M("div"),t=M("div"),l=M("button"),o=Y(n),u=L();for(let g=0;g<p.length;g+=1)p[g].c();this.h()},l(g){e=D(g,"DIV",{class:!0});var $=I(e);t=D($,"DIV",{class:!0});var w=I(t);l=D(w,"BUTTON",{class:!0});var A=I(l);o=J(A,n),A.forEach(h),u=H(w);for(let b=0;b<p.length;b+=1)p[b].l(w);w.forEach(h),$.forEach(h),this.h()},h(){v(l,"class",r="min-w-fit outline-none p-1.5 "+(a[9]===""?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),v(t,"class","flex gap-1 scrollbar-none overflow-x-auto w-fit text-center text-sm font-medium rounded-full bg-transparent px-1.5 pb-0.5"),v(e,"class","flex w-full sticky")},m(g,$){O(g,e,$),y(e,t),y(t,l),y(l,o),y(t,u);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(t,null);a[32](t),s||(d=ce(l,"click",a[30]),s=!0)},p(g,$){if($[0]&262144&&n!==(n=g[18].t("All")+"")&&te(o,n),$[0]&512&&r!==(r="min-w-fit outline-none p-1.5 "+(g[9]===""?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&v(l,"class",r),$[0]&4608){c=re(g[12]);let w;for(w=0;w<c.length;w+=1){const A=Qe(g,c,w);p[w]?p[w].p(A,$):(p[w]=xe(A),p[w].c(),p[w].m(t,null))}for(;w<p.length;w+=1)p[w].d(1);p.length=c.length}},d(g){g&&h(e),be(p,g),a[32](null),s=!1,d()}}}function xe(a){let e,t=a[50]+"",l,n,o,r,u;function s(){return a[31](a[50])}return{c(){e=M("button"),l=Y(t),n=L(),this.h()},l(d){e=D(d,"BUTTON",{class:!0});var c=I(e);l=J(c,t),n=H(c),c.forEach(h),this.h()},h(){v(e,"class",o="min-w-fit outline-none p-1.5 "+(a[9]===a[50]?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")},m(d,c){O(d,e,c),y(e,l),y(e,n),r||(u=ce(e,"click",s),r=!0)},p(d,c){a=d,c[0]&4096&&t!==(t=a[50]+"")&&te(l,t),c[0]&4608&&o!==(o="min-w-fit outline-none p-1.5 "+(a[9]===a[50]?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&v(e,"class",o)},d(d){d&&h(e),r=!1,u()}}}function et(a){let e,t,l=a[18].t("No results found")+"",n;return{c(){e=M("div"),t=M("div"),n=Y(l),this.h()},l(o){e=D(o,"DIV",{});var r=I(e);t=D(r,"DIV",{class:!0});var u=I(t);n=J(u,l),u.forEach(h),r.forEach(h),this.h()},h(){v(t,"class","block px-3 py-2 text-sm text-gray-700 dark:text-gray-100")},m(o,r){O(o,e,r),y(e,t),y(t,n)},p(o,r){r[0]&262144&&l!==(l=o[18].t("No results found")+"")&&te(n,l)},d(o){o&&h(e)}}}function tt(a){var n,o;let e,t=re((o=(n=a[47].model)==null?void 0:n.info)==null?void 0:o.meta.tags),l=[];for(let r=0;r<t.length;r+=1)l[r]=lt(Je(a,t,r));return{c(){e=M("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=D(r,"DIV",{class:!0});var u=I(e);for(let s=0;s<l.length;s+=1)l[s].l(u);u.forEach(h),this.h()},h(){v(e,"class","flex gap-0.5 self-start h-full mb-1.5 -translate-x-1")},m(r,u){O(r,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(r,u){var s,d;if(u[0]&65536){t=re((d=(s=r[47].model)==null?void 0:s.info)==null?void 0:d.meta.tags);let c;for(c=0;c<t.length;c+=1){const p=Je(r,t,c);l[c]?l[c].p(p,u):(l[c]=lt(p),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=t.length}},d(r){r&&h(e),be(l,r)}}}function lt(a){let e,t=a[50].name+"",l,n;return{c(){e=M("div"),l=Y(t),n=L(),this.h()},l(o){e=D(o,"DIV",{class:!0});var r=I(e);l=J(r,t),n=H(r),r.forEach(h),this.h()},h(){v(e,"class","text-xs font-bold px-1 rounded-sm uppercase line-clamp-1 bg-gray-500/20 text-gray-700 dark:text-gray-200")},m(o,r){O(o,e,r),y(e,l),y(e,n)},p(o,r){r[0]&65536&&t!==(t=o[50].name+"")&&te(l,t)},d(o){o&&h(e)}}}function tl(a){let e,t,l,n=a[47].label+"",o;return{c(){e=M("img"),l=L(),o=Y(n),this.h()},l(r){e=D(r,"IMG",{src:!0,alt:!0,class:!0}),l=H(r),o=J(r,n),this.h()},h(){var r,u,s;Ze(e.src,t=((s=(u=(r=a[47].model)==null?void 0:r.info)==null?void 0:u.meta)==null?void 0:s.profile_image_url)??"/static/favicon.png")||v(e,"src",t),v(e,"alt","Model"),v(e,"class","rounded-full size-5 flex items-center mr-2")},m(r,u){O(r,e,u),O(r,l,u),O(r,o,u)},p(r,u){var s,d,c;u[0]&65536&&!Ze(e.src,t=((c=(d=(s=r[47].model)==null?void 0:s.info)==null?void 0:d.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")&&v(e,"src",t),u[0]&65536&&n!==(n=r[47].label+"")&&te(o,n)},d(r){r&&(h(e),h(l),h(o))}}}function at(a){var n,o,r,u,s,d;let e,t,l;return t=new de({props:{content:`${(o=(n=a[47].model.ollama)==null?void 0:n.details)!=null&&o.quantization_level?((u=(r=a[47].model.ollama)==null?void 0:r.details)==null?void 0:u.quantization_level)+" ":""}${(s=a[47].model.ollama)!=null&&s.size?`(${(((d=a[47].model.ollama)==null?void 0:d.size)/1024**3).toFixed(1)}GB)`:""}`,className:"self-end",$$slots:{default:[ll]},$$scope:{ctx:a}}}),{c(){e=M("div"),Q(t.$$.fragment),this.h()},l(c){e=D(c,"DIV",{class:!0});var p=I(e);K(t.$$.fragment,p),p.forEach(h),this.h()},h(){v(e,"class","flex ml-1 items-center translate-y-[0.5px]")},m(c,p){O(c,e,p),X(t,e,null),l=!0},p(c,p){var $,w,A,b,W,V;const g={};p[0]&65536&&(g.content=`${(w=($=c[47].model.ollama)==null?void 0:$.details)!=null&&w.quantization_level?((b=(A=c[47].model.ollama)==null?void 0:A.details)==null?void 0:b.quantization_level)+" ":""}${(W=c[47].model.ollama)!=null&&W.size?`(${(((V=c[47].model.ollama)==null?void 0:V.size)/1024**3).toFixed(1)}GB)`:""}`),p[0]&65536|p[1]&256&&(g.$$scope={dirty:p,ctx:c}),t.$set(g)},i(c){l||(E(t.$$.fragment,c),l=!0)},o(c){z(t.$$.fragment,c),l=!1},d(c){c&&h(e),x(t)}}}function ll(a){var n,o;let e,t=(((o=(n=a[47].model.ollama)==null?void 0:n.details)==null?void 0:o.parameter_size)??"")+"",l;return{c(){e=M("span"),l=Y(t),this.h()},l(r){e=D(r,"SPAN",{class:!0});var u=I(e);l=J(u,t),u.forEach(h),this.h()},h(){v(e,"class","text-xs font-medium text-gray-600 dark:text-gray-400 line-clamp-1")},m(r,u){O(r,e,u),y(e,l)},p(r,u){var s,d;u[0]&65536&&t!==(t=(((d=(s=r[47].model.ollama)==null?void 0:s.details)==null?void 0:d.parameter_size)??"")+"")&&te(l,t)},d(r){r&&h(e)}}}function al(a){let e,t;return e=new de({props:{content:"External",$$slots:{default:[rl]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function nl(a){let e,t;return e=new de({props:{content:"Direct",$$slots:{default:[ol]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function rl(a){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z" clip-rule="evenodd"></path></svg>';return{c(){e=M("div"),e.innerHTML=t,this.h()},l(l){e=D(l,"DIV",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-n3uai6"&&(e.innerHTML=t),this.h()},h(){v(e,"class","translate-y-[1px]")},m(l,n){O(l,e,n)},p:ve,d(l){l&&h(e)}}}function ol(a){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M2 2.75A.75.75 0 0 1 2.75 2C8.963 2 14 7.037 14 13.25a.75.75 0 0 1-1.5 0c0-5.385-4.365-9.75-9.75-9.75A.75.75 0 0 1 2 2.75Zm0 4.5a.75.75 0 0 1 .75-.75 6.75 6.75 0 0 1 6.75 6.75.75.75 0 0 1-1.5 0C8 10.35 5.65 8 2.75 8A.75.75 0 0 1 2 7.25ZM3.5 11a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z" clip-rule="evenodd"></path></svg>';return{c(){e=M("div"),e.innerHTML=t,this.h()},l(l){e=D(l,"DIV",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-1dup7go"&&(e.innerHTML=t),this.h()},h(){v(e,"class","translate-y-[1px]")},m(l,n){O(l,e,n)},p:ve,d(l){l&&h(e)}}}function nt(a){var l,n,o;let e,t;return e=new de({props:{content:`${qe.parse(Fe((o=(n=(l=a[47].model)==null?void 0:l.info)==null?void 0:n.meta)==null?void 0:o.description).replaceAll(`
`,"<br>"))}`,$$slots:{default:[sl]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,u){X(e,r,u),t=!0},p(r,u){var d,c,p;const s={};u[0]&65536&&(s.content=`${qe.parse(Fe((p=(c=(d=r[47].model)==null?void 0:d.info)==null?void 0:c.meta)==null?void 0:p.description).replaceAll(`
`,"<br>"))}`),u[1]&256&&(s.$$scope={dirty:u,ctx:r}),e.$set(s)},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){z(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function sl(a){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>';return{c(){e=M("div"),e.innerHTML=t,this.h()},l(l){e=D(l,"DIV",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-1mqbvzr"&&(e.innerHTML=t),this.h()},h(){v(e,"class","translate-y-[1px]")},m(l,n){O(l,e,n)},p:ve,d(l){l&&h(e)}}}function rt(a){var r,u;let e,t,l=re((u=(r=a[47].model)==null?void 0:r.info)==null?void 0:u.meta.tags),n=[];for(let s=0;s<l.length;s+=1)n[s]=ot(Ye(a,l,s));const o=s=>z(n[s],1,1,()=>{n[s]=null});return{c(){e=M("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=D(s,"DIV",{class:!0});var d=I(e);for(let c=0;c<n.length;c+=1)n[c].l(d);d.forEach(h),this.h()},h(){v(e,"class","flex gap-0.5 self-center items-center h-full translate-y-[0.5px] overflow-x-auto scrollbar-none")},m(s,d){O(s,e,d);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);t=!0},p(s,d){var c,p;if(d[0]&65536){l=re((p=(c=s[47].model)==null?void 0:c.info)==null?void 0:p.meta.tags);let g;for(g=0;g<l.length;g+=1){const $=Ye(s,l,g);n[g]?(n[g].p($,d),E(n[g],1)):(n[g]=ot($),n[g].c(),E(n[g],1),n[g].m(e,null))}for(ae(),g=l.length;g<n.length;g+=1)o(g);ne()}},i(s){if(!t){for(let d=0;d<l.length;d+=1)E(n[d]);t=!0}},o(s){n=n.filter(Boolean);for(let d=0;d<n.length;d+=1)z(n[d]);t=!1},d(s){s&&h(e),be(n,s)}}}function il(a){let e,t=a[50].name+"",l,n;return{c(){e=M("div"),l=Y(t),n=L(),this.h()},l(o){e=D(o,"DIV",{class:!0});var r=I(e);l=J(r,t),r.forEach(h),n=H(o),this.h()},h(){v(e,"class","text-xs font-bold px-1 rounded-sm uppercase bg-gray-500/20 text-gray-700 dark:text-gray-200")},m(o,r){O(o,e,r),y(e,l),O(o,n,r)},p(o,r){r[0]&65536&&t!==(t=o[50].name+"")&&te(l,t)},d(o){o&&(h(e),h(n))}}}function ot(a){let e,t;return e=new de({props:{content:a[50].name,className:"flex-shrink-0",$$slots:{default:[il]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},p(l,n){const o={};n[0]&65536&&(o.content=l[50].name),n[0]&65536|n[1]&256&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function st(a){let e,t,l;return t=new Ot({}),{c(){e=M("div"),Q(t.$$.fragment),this.h()},l(n){e=D(n,"DIV",{class:!0});var o=I(e);K(t.$$.fragment,o),o.forEach(h),this.h()},h(){v(e,"class","ml-auto pl-2 pr-2 md:pr-0")},m(n,o){O(n,e,o),X(t,e,null),l=!0},i(n){l||(E(t.$$.fragment,n),l=!0)},o(n){z(t.$$.fragment,n),l=!1},d(n){n&&h(e),x(t)}}}function it(a){var le,oe,ke,_e,pe,ye,$e,Ee,Me,De,Ce,Ve,Ie,Ne,Te;let e,t,l,n,o,r,u,s,d,c,p,g,$,w,A,b,W,V,N,Z,k=a[19]&&(((_e=(ke=(oe=(le=a[47])==null?void 0:le.model)==null?void 0:oe.info)==null?void 0:ke.meta)==null?void 0:_e.tags)??[]).length>0&&tt(a);s=new de({props:{content:((pe=a[20])==null?void 0:pe.role)==="admin"?((ye=a[47])==null?void 0:ye.value)??"":"",placement:"top-start",$$slots:{default:[tl]},$$scope:{ctx:a}}});let P=a[47].model.owned_by==="ollama"&&(((Ee=($e=a[47].model.ollama)==null?void 0:$e.details)==null?void 0:Ee.parameter_size)??"")!==""&&at(a);const C=[nl,al],f=[];function _(R,i){var T;return(T=R[47].model)!=null&&T.direct?0:R[47].model.owned_by==="openai"?1:-1}~(p=_(a))&&(g=f[p]=C[p](a));let m=((Ce=(De=(Me=a[47].model)==null?void 0:Me.info)==null?void 0:De.meta)==null?void 0:Ce.description)&&nt(a),B=!a[19]&&(((Te=(Ne=(Ie=(Ve=a[47])==null?void 0:Ve.model)==null?void 0:Ie.info)==null?void 0:Ne.meta)==null?void 0:Te.tags)??[]).length>0&&rt(a),S=a[0]===a[47].value&&st();function ee(){return a[33](a[47],a[49])}return{c(){e=M("button"),t=M("div"),k&&k.c(),l=L(),n=M("div"),o=M("div"),r=M("div"),u=M("div"),Q(s.$$.fragment),d=L(),P&&P.c(),c=L(),g&&g.c(),$=L(),m&&m.c(),w=L(),B&&B.c(),A=L(),S&&S.c(),this.h()},l(R){e=D(R,"BUTTON",{"aria-label":!0,class:!0,"data-arrow-selected":!0});var i=I(e);t=D(i,"DIV",{class:!0});var T=I(t);k&&k.l(T),l=H(T),n=D(T,"DIV",{class:!0});var j=I(n);o=D(j,"DIV",{class:!0});var q=I(o);r=D(q,"DIV",{class:!0});var F=I(r);u=D(F,"DIV",{class:!0});var U=I(u);K(s.$$.fragment,U),U.forEach(h),F.forEach(h),d=H(q),P&&P.l(q),q.forEach(h),c=H(j),g&&g.l(j),$=H(j),m&&m.l(j),w=H(j),B&&B.l(j),j.forEach(h),T.forEach(h),A=H(i),S&&S.l(i),i.forEach(h),this.h()},h(){v(u,"class","flex items-center min-w-fit"),v(r,"class","line-clamp-1"),v(o,"class","flex items-center min-w-fit"),v(n,"class","flex items-center gap-2"),v(t,"class","flex flex-col"),v(e,"aria-label","model-item"),v(e,"class",b="flex w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted "+(a[49]===a[14]?"bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent":"")),v(e,"data-arrow-selected",W=a[49]===a[14])},m(R,i){O(R,e,i),y(e,t),k&&k.m(t,null),y(t,l),y(t,n),y(n,o),y(o,r),y(r,u),X(s,u,null),y(o,d),P&&P.m(o,null),y(n,c),~p&&f[p].m(n,null),y(n,$),m&&m.m(n,null),y(n,w),B&&B.m(n,null),y(e,A),S&&S.m(e,null),V=!0,N||(Z=ce(e,"click",ee),N=!0)},p(R,i){var q,F,U,me,he,se,G,ie,ze,Oe,Se,Ae,Be,Pe,je;a=R,a[19]&&(((me=(U=(F=(q=a[47])==null?void 0:q.model)==null?void 0:F.info)==null?void 0:U.meta)==null?void 0:me.tags)??[]).length>0?k?k.p(a,i):(k=tt(a),k.c(),k.m(t,l)):k&&(k.d(1),k=null);const T={};i[0]&1114112&&(T.content=((he=a[20])==null?void 0:he.role)==="admin"?((se=a[47])==null?void 0:se.value)??"":""),i[0]&65536|i[1]&256&&(T.$$scope={dirty:i,ctx:a}),s.$set(T),a[47].model.owned_by==="ollama"&&(((ie=(G=a[47].model.ollama)==null?void 0:G.details)==null?void 0:ie.parameter_size)??"")!==""?P?(P.p(a,i),i[0]&65536&&E(P,1)):(P=at(a),P.c(),E(P,1),P.m(o,null)):P&&(ae(),z(P,1,1,()=>{P=null}),ne());let j=p;p=_(a),p!==j&&(g&&(ae(),z(f[j],1,1,()=>{f[j]=null}),ne()),~p?(g=f[p],g||(g=f[p]=C[p](a),g.c()),E(g,1),g.m(n,$)):g=null),(Se=(Oe=(ze=a[47].model)==null?void 0:ze.info)==null?void 0:Oe.meta)!=null&&Se.description?m?(m.p(a,i),i[0]&65536&&E(m,1)):(m=nt(a),m.c(),E(m,1),m.m(n,w)):m&&(ae(),z(m,1,1,()=>{m=null}),ne()),!a[19]&&(((je=(Pe=(Be=(Ae=a[47])==null?void 0:Ae.model)==null?void 0:Be.info)==null?void 0:Pe.meta)==null?void 0:je.tags)??[]).length>0?B?(B.p(a,i),i[0]&589824&&E(B,1)):(B=rt(a),B.c(),E(B,1),B.m(n,null)):B&&(ae(),z(B,1,1,()=>{B=null}),ne()),a[0]===a[47].value?S?i[0]&65537&&E(S,1):(S=st(),S.c(),E(S,1),S.m(e,null)):S&&(ae(),z(S,1,1,()=>{S=null}),ne()),(!V||i[0]&16384&&b!==(b="flex w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted "+(a[49]===a[14]?"bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent":"")))&&v(e,"class",b),(!V||i[0]&16384&&W!==(W=a[49]===a[14]))&&v(e,"data-arrow-selected",W)},i(R){V||(E(s.$$.fragment,R),E(P),E(g),E(m),E(B),E(S),V=!0)},o(R){z(s.$$.fragment,R),z(P),z(g),z(m),z(B),z(S),V=!1},d(R){R&&h(e),k&&k.d(),x(s),P&&P.d(),~p&&f[p].d(),m&&m.d(),B&&B.d(),S&&S.d(),N=!1,Z()}}}function ft(a){let e,t;return e=new de({props:{content:a[18].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:a[8]}),placement:"top-start",$$slots:{default:[fl]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){X(e,l,n),t=!0},p(l,n){const o={};n[0]&262400&&(o.content=l[18].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:l[8]})),n[0]&262400|n[1]&256&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){z(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function fl(a){let e,t,l=a[18].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:a[8]})+"",n,o,r;return{c(){e=M("button"),t=M("div"),n=Y(l),this.h()},l(u){e=D(u,"BUTTON",{class:!0});var s=I(e);t=D(s,"DIV",{class:!0});var d=I(t);n=J(d,l),d.forEach(h),s.forEach(h),this.h()},h(){v(t,"class","truncate"),v(e,"class","flex w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted")},m(u,s){O(u,e,s),y(e,t),y(t,n),o||(r=ce(e,"click",a[34]),o=!0)},p(u,s){s[0]&262400&&l!==(l=u[18].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:u[8]})+"")&&te(n,l)},d(u){u&&h(e),o=!1,r()}}}function ut(a){let e,t=a[17][a[44]].digest+"",l;return{c(){e=M("div"),l=Y(t),this.h()},l(n){e=D(n,"DIV",{class:!0});var o=I(e);l=J(o,t),o.forEach(h),this.h()},h(){v(e,"class","-mt-1 h-fit text-[0.7rem] dark:text-gray-500 line-clamp-1")},m(n,o){O(n,e,o),y(e,l)},p(n,o){o[0]&131072&&t!==(t=n[17][n[44]].digest+"")&&te(l,t)},d(n){n&&h(e)}}}function ul(a){let e,t='<svg class="w-4 h-4 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6"></path></svg>',l,n;function o(){return a[35](a[44])}return{c(){e=M("button"),e.innerHTML=t,this.h()},l(r){e=D(r,"BUTTON",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-19bzgft"&&(e.innerHTML=t),this.h()},h(){v(e,"class","text-gray-800 dark:text-gray-100")},m(r,u){O(r,e,u),l||(n=ce(e,"click",o),l=!0)},p(r,u){a=r},d(r){r&&h(e),l=!1,n()}}}function ct(a){let e,t,l,n=`<svg class="size-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
											transform-origin: center;
											animation: spinner_AtaB 0.75s infinite linear;
										}
										@keyframes spinner_AtaB {
											100% {
												transform: rotate(360deg);
											}
										}
									</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`,o,r,u,s,d,c=a[44]+"",p,g,$,w,A="pullProgress"in a[17][a[44]]?`(${a[17][a[44]].pullProgress}%)`:"",b,W,V,N,Z,k,P,C="digest"in a[17][a[44]]&&a[17][a[44]].digest&&ut(a);return Z=new de({props:{content:a[18].t("Cancel"),$$slots:{default:[ul]},$$scope:{ctx:a}}}),{c(){e=M("div"),t=M("div"),l=M("div"),l.innerHTML=n,o=L(),r=M("div"),u=M("div"),s=M("div"),d=Y('Downloading "'),p=Y(c),g=Y('"'),$=L(),w=M("div"),b=Y(A),W=L(),C&&C.c(),V=L(),N=M("div"),Q(Z.$$.fragment),k=L(),this.h()},l(f){e=D(f,"DIV",{class:!0});var _=I(e);t=D(_,"DIV",{class:!0});var m=I(t);l=D(m,"DIV",{class:!0,"data-svelte-h":!0}),we(l)!=="svelte-102rp4j"&&(l.innerHTML=n),o=H(m),r=D(m,"DIV",{class:!0});var B=I(r);u=D(B,"DIV",{class:!0});var S=I(u);s=D(S,"DIV",{class:!0});var ee=I(s);d=J(ee,'Downloading "'),p=J(ee,c),g=J(ee,'"'),ee.forEach(h),$=H(S),w=D(S,"DIV",{class:!0});var le=I(w);b=J(le,A),le.forEach(h),S.forEach(h),W=H(B),C&&C.l(B),B.forEach(h),m.forEach(h),V=H(_),N=D(_,"DIV",{class:!0});var oe=I(N);K(Z.$$.fragment,oe),oe.forEach(h),k=H(_),_.forEach(h),this.h()},h(){v(l,"class","-ml-2 mr-2.5 translate-y-0.5"),v(s,"class","line-clamp-1"),v(w,"class","shrink-0"),v(u,"class","flex gap-1"),v(r,"class","flex flex-col self-start"),v(t,"class","flex"),v(N,"class","mr-2 ml-1 translate-y-0.5"),v(e,"class","flex w-full justify-between font-medium select-none rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 rounded-lg cursor-pointer data-highlighted:bg-muted")},m(f,_){O(f,e,_),y(e,t),y(t,l),y(t,o),y(t,r),y(r,u),y(u,s),y(s,d),y(s,p),y(s,g),y(u,$),y(u,w),y(w,b),y(r,W),C&&C.m(r,null),y(e,V),y(e,N),X(Z,N,null),y(e,k),P=!0},p(f,_){(!P||_[0]&131072)&&c!==(c=f[44]+"")&&te(p,c),(!P||_[0]&131072)&&A!==(A="pullProgress"in f[17][f[44]]?`(${f[17][f[44]].pullProgress}%)`:"")&&te(b,A),"digest"in f[17][f[44]]&&f[17][f[44]].digest?C?C.p(f,_):(C=ut(f),C.c(),C.m(r,null)):C&&(C.d(1),C=null);const m={};_[0]&262144&&(m.content=f[18].t("Cancel")),_[0]&131072|_[1]&256&&(m.$$scope={dirty:_,ctx:f}),Z.$set(m)},i(f){P||(E(Z.$$.fragment,f),P=!0)},o(f){z(Z.$$.fragment,f),P=!1},d(f){f&&h(e),C&&C.d(),x(Z)}}}function dt(a){let e,t,l,n,o,r,u,s=a[18].t("Temporary Chat")+"",d,c,p,g,$,w,A;return r=new Kt({props:{className:"size-4",strokeWidth:"2.5"}}),g=new Gt({props:{state:a[21]}}),{c(){e=M("hr"),t=L(),l=M("div"),n=M("button"),o=M("div"),Q(r.$$.fragment),u=L(),d=Y(s),c=L(),p=M("div"),Q(g.$$.fragment),this.h()},l(b){e=D(b,"HR",{class:!0}),t=H(b),l=D(b,"DIV",{class:!0});var W=I(l);n=D(W,"BUTTON",{class:!0});var V=I(n);o=D(V,"DIV",{class:!0});var N=I(o);K(r.$$.fragment,N),u=H(N),d=J(N,s),N.forEach(h),c=H(V),p=D(V,"DIV",{});var Z=I(p);K(g.$$.fragment,Z),Z.forEach(h),V.forEach(h),W.forEach(h),this.h()},h(){v(e,"class","border-gray-100 dark:border-gray-800"),v(o,"class","flex gap-2.5 items-center"),v(n,"class","flex justify-between w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 px-3 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted"),v(l,"class","flex items-center mx-2 my-2")},m(b,W){O(b,e,W),O(b,t,W),O(b,l,W),y(l,n),y(n,o),X(r,o,null),y(o,u),y(o,d),y(n,c),y(n,p),X(g,p,null),$=!0,w||(A=ce(n,"click",a[36]),w=!0)},p(b,W){(!$||W[0]&262144)&&s!==(s=b[18].t("Temporary Chat")+"")&&te(d,s);const V={};W[0]&2097152&&(V.state=b[21]),g.$set(V)},i(b){$||(E(r.$$.fragment,b),E(g.$$.fragment,b),$=!0)},o(b){z(r.$$.fragment,b),z(g.$$.fragment,b),$=!1},d(b){b&&(h(e),h(t),h(l)),x(r),x(g),w=!1,A()}}}function cl(a){let e,t,l,n,o=!(a[8].trim()in a[17])&&a[8]&&a[15]&&a[20].role==="admin",r,u,s,d,c,p,g,$=a[3]&&Ke(a),w=a[12]&&Xe(a),A=re(a[16]),b=[];for(let f=0;f<A.length;f+=1)b[f]=it(Re(a,A,f));const W=f=>z(b[f],1,1,()=>{b[f]=null});let V=null;A.length||(V=et(a));let N=o&&ft(a),Z=re(Object.keys(a[17])),k=[];for(let f=0;f<Z.length;f+=1)k[f]=ct(Ge(a,Z,f));const P=f=>z(k[f],1,1,()=>{k[f]=null});let C=a[5]&&dt(a);return{c(){$&&$.c(),e=L(),t=M("div"),w&&w.c(),l=L();for(let f=0;f<b.length;f+=1)b[f].c();V&&V.c(),n=L(),N&&N.c(),r=L();for(let f=0;f<k.length;f+=1)k[f].c();u=L(),C&&C.c(),s=L(),d=M("div"),c=L(),p=M("div"),this.h()},l(f){$&&$.l(f),e=H(f),t=D(f,"DIV",{class:!0});var _=I(t);w&&w.l(_),l=H(_);for(let m=0;m<b.length;m+=1)b[m].l(_);V&&V.l(_),n=H(_),N&&N.l(_),r=H(_);for(let m=0;m<k.length;m+=1)k[m].l(_);_.forEach(h),u=H(f),C&&C.l(f),s=H(f),d=D(f,"DIV",{class:!0}),I(d).forEach(h),c=H(f),p=D(f,"DIV",{class:!0}),I(p).forEach(h),this.h()},h(){v(t,"class","px-3 mb-2 max-h-64 overflow-y-auto scrollbar-hidden group relative"),v(d,"class","hidden w-[42rem]"),v(p,"class","hidden w-[32rem]")},m(f,_){$&&$.m(f,_),O(f,e,_),O(f,t,_),w&&w.m(t,null),y(t,l);for(let m=0;m<b.length;m+=1)b[m]&&b[m].m(t,null);V&&V.m(t,null),y(t,n),N&&N.m(t,null),y(t,r);for(let m=0;m<k.length;m+=1)k[m]&&k[m].m(t,null);O(f,u,_),C&&C.m(f,_),O(f,s,_),O(f,d,_),O(f,c,_),O(f,p,_),g=!0},p(f,_){if(f[3]?$?($.p(f,_),_[0]&8&&E($,1)):($=Ke(f),$.c(),E($,1),$.m(e.parentNode,e)):$&&(ae(),z($,1,1,()=>{$=null}),ne()),f[12]?w?w.p(f,_):(w=Xe(f),w.c(),w.m(t,l)):w&&(w.d(1),w=null),_[0]&1918977){A=re(f[16]);let m;for(m=0;m<A.length;m+=1){const B=Re(f,A,m);b[m]?(b[m].p(B,_),E(b[m],1)):(b[m]=it(B),b[m].c(),E(b[m],1),b[m].m(t,n))}for(ae(),m=A.length;m<b.length;m+=1)W(m);ne(),!A.length&&V?V.p(f,_):A.length?V&&(V.d(1),V=null):(V=et(f),V.c(),V.m(t,n))}if(_[0]&1212672&&(o=!(f[8].trim()in f[17])&&f[8]&&f[15]&&f[20].role==="admin"),o?N?(N.p(f,_),_[0]&1212672&&E(N,1)):(N=ft(f),N.c(),E(N,1),N.m(t,r)):N&&(ae(),z(N,1,1,()=>{N=null}),ne()),_[0]&17170432){Z=re(Object.keys(f[17]));let m;for(m=0;m<Z.length;m+=1){const B=Ge(f,Z,m);k[m]?(k[m].p(B,_),E(k[m],1)):(k[m]=ct(B),k[m].c(),E(k[m],1),k[m].m(t,null))}for(ae(),m=Z.length;m<k.length;m+=1)P(m);ne()}f[5]?C?(C.p(f,_),_[0]&32&&E(C,1)):(C=dt(f),C.c(),E(C,1),C.m(s.parentNode,s)):C&&(ae(),z(C,1,1,()=>{C=null}),ne())},i(f){if(!g){E($);for(let _=0;_<A.length;_+=1)E(b[_]);E(N);for(let _=0;_<Z.length;_+=1)E(k[_]);E(C),g=!0}},o(f){z($),b=b.filter(Boolean);for(let _=0;_<b.length;_+=1)z(b[_]);z(N),k=k.filter(Boolean);for(let _=0;_<k.length;_+=1)z(k[_]);z(C),g=!1},d(f){f&&(h(e),h(t),h(u),h(s),h(d),h(c),h(p)),$&&$.d(f),w&&w.d(),be(b,f),V&&V.d(),N&&N.d(),be(k,f),C&&C.d(f)}}}function dl(a){let e;const t=a[27].default,l=kt(t,a,a[39],null),n=l||cl(a);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,r){n&&n.m(o,r),e=!0},p(o,r){l?l.p&&(!e||r[1]&256)&&yt(l,t,o,o[39],e?Et(t,o[39],r,null):$t(o[39]),null):n&&n.p&&(!e||r[0]&4185913)&&n.p(o,e?r:[-1,-1])},i(o){e||(E(n,o),e=!0)},o(o){z(n,o),e=!1},d(o){n&&n.d(o)}}}function ml(a){let e,t,l,n;return e=new Vt({props:{class:"relative w-full font-primary","aria-label":a[2],id:"model-selector-"+a[1]+"-button",$$slots:{default:[el]},$$scope:{ctx:a}}}),l=new It({props:{class:" z-40 "+(a[19]?"w-full":`${a[6]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden",transition:Tt,side:a[19]?"bottom":"bottom-start",sideOffset:3,$$slots:{default:[dl]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment),t=L(),Q(l.$$.fragment)},l(o){K(e.$$.fragment,o),t=H(o),K(l.$$.fragment,o)},m(o,r){X(e,o,r),O(o,t,r),X(l,o,r),n=!0},p(o,r){const u={};r[0]&4&&(u["aria-label"]=o[2]),r[0]&2&&(u.id="model-selector-"+o[1]+"-button"),r[0]&8324|r[1]&256&&(u.$$scope={dirty:r,ctx:o}),e.$set(u);const s={};r[0]&524352&&(s.class=" z-40 "+(o[19]?"w-full":`${o[6]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden"),r[0]&524288&&(s.side=o[19]?"bottom":"bottom-start"),r[0]&4185913|r[1]&256&&(s.$$scope={dirty:r,ctx:o}),l.$set(s)},i(o){n||(E(e.$$.fragment,o),E(l.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),z(l.$$.fragment,o),n=!1},d(o){o&&h(t),x(e,o),x(l,o)}}}function hl(a){let e,t,l;function n(r){a[38](r)}let o={onOpenChange:a[37],closeFocus:!1,$$slots:{default:[ml]},$$scope:{ctx:a}};return a[11]!==void 0&&(o.open=a[11]),e=new Ct({props:o}),ht.push(()=>Dt(e,"open",n)),{c(){Q(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,u){X(e,r,u),l=!0},p(r,u){const s={};u[0]&16640&&(s.onOpenChange=r[37]),u[0]&4194303|u[1]&256&&(s.$$scope={dirty:u,ctx:r}),!t&&u[0]&2048&&(t=!0,s.open=r[11],pt(()=>t=!1)),e.$set(s)},i(r){l||(E(e.$$.fragment,r),l=!0)},o(r){z(e.$$.fragment,r),l=!1},d(r){x(e,r)}}}function gl(a,e,t){let l,n,o,r,u,s,d,c,p;fe(a,ge,i=>t(17,n=i)),fe(a,jt,i=>t(40,r=i)),fe(a,Lt,i=>t(41,u=i)),fe(a,Ht,i=>t(26,s=i)),fe(a,Wt,i=>t(19,d=i)),fe(a,Zt,i=>t(20,c=i)),fe(a,Ue,i=>t(21,p=i));let{$$slots:g={},$$scope:$}=e;const w=vt("i18n");fe(a,w,i=>t(18,o=i)),bt();let{id:A=""}=e,{value:b=""}=e,{placeholder:W="Select a model"}=e,{searchEnabled:V=!0}=e,{searchPlaceholder:N=o.t("Search a model")}=e,{showTemporaryChatControl:Z=!1}=e,{items:k=[]}=e,{className:P="w-[32rem]"}=e,{triggerClassName:C="text-lg"}=e,f,_=!1,m=[],B="",S=0,ee="",le="",oe=null;const ke=new Nt(k.map(i=>{var j,q,F,U,me,he,se,G;return{...i,modelName:(j=i.model)==null?void 0:j.name,tags:(me=(U=(F=(q=i.model)==null?void 0:q.info)==null?void 0:F.meta)==null?void 0:U.tags)==null?void 0:me.map(ie=>ie.name).join(" "),desc:(G=(se=(he=i.model)==null?void 0:he.info)==null?void 0:se.meta)==null?void 0:G.description}}),{keys:["value","tags","modelName"],threshold:.4}),_e=async()=>{var q;const i=ee.trim().replace(/^ollama\s+(run|pull)\s+/,"");if(console.log(n),n[i]){ue.error(o.t("Model '{{modelTag}}' is already in queue for downloading.",{modelTag:i}));return}if(Object.keys(n).length===3){ue.error(o.t("Maximum of 3 models can be downloaded simultaneously. Please try again later."));return}const[T,j]=await Bt(localStorage.token,i,"0").catch(F=>(ue.error(`${F}`),null));if(T){const F=T.body.pipeThrough(new TextDecoderStream).pipeThrough(Ut(`
`)).getReader();for(ge.set({...n,[i]:{...n[i],abortController:j,reader:F,done:!1}});;)try{const{value:U,done:me}=await F.read();if(me)break;let he=U.split(`
`);for(const se of he)if(se!==""){let G=JSON.parse(se);if(console.log(G),G.error)throw G.error;if(G.detail)throw G.detail;if(G.status)if(G.digest){let ie=0;G.completed?ie=Math.round(G.completed/G.total*1e3)/10:ie=100,ge.set({...n,[i]:{...n[i],pullProgress:ie,digest:G.digest}})}else ue.success(G.status),ge.set({...n,[i]:{...n[i],done:G.status==="success"}})}}catch(U){console.log(U),typeof U!="string"&&(U=U.message),ue.error(`${U}`);break}n[i].done?(ue.success(o.t("Model '{{modelName}}' has been successfully downloaded.",{modelName:i})),qt.set(await Ft(localStorage.token,((q=u==null?void 0:u.features)==null?void 0:q.enable_direct_connections)&&((r==null?void 0:r.directConnections)??null)))):ue.error(o.t("Download canceled")),delete n[i],ge.set({...n})}};wt(async()=>{t(15,oe=await At(localStorage.token).catch(i=>!1)),k&&(t(12,m=k.flatMap(i=>{var T,j,q;return((q=(j=(T=i.model)==null?void 0:T.info)==null?void 0:j.meta)==null?void 0:q.tags)??[]}).map(i=>i.name)),t(12,m=Array.from(new Set(m)).sort((i,T)=>i.localeCompare(T))))});const pe=async i=>{const{reader:T,abortController:j}=n[i];j&&j.abort(),T&&(await T.cancel(),delete n[i],ge.set({...n}),await Pt(localStorage.token,i),ue.success(`${i} download has been canceled`))};function ye(){ee=this.value,t(8,ee)}const $e=i=>{if(i.code==="Enter"&&l.length>0){t(0,b=l[S].value),t(11,_=!1);return}else i.code==="ArrowDown"?t(14,S=Math.min(S+1,l.length-1)):i.code==="ArrowUp"?t(14,S=Math.max(S-1,0)):t(14,S=0);const T=document.querySelector('[data-arrow-selected="true"]');T==null||T.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})},Ee=()=>{t(9,le="")},Me=i=>{t(9,le=i)};function De(i){ht[i?"unshift":"push"](()=>{f=i,t(10,f)})}const Ce=(i,T)=>{t(0,b=i.value),t(14,S=T),t(11,_=!1)},Ve=()=>{_e()},Ie=i=>{pe(i)},Ne=async()=>{Ue.set(!p),await Rt("/");const i=document.getElementById("new-chat-button");setTimeout(()=>{i==null||i.click()},0),p?history.replaceState(null,"","?temporary-chat=true"):history.replaceState(null,"",location.pathname),t(11,_=!1)},Te=async()=>{t(8,ee=""),t(14,S=0),window.setTimeout(()=>{var i;return(i=document.getElementById("model-search-input"))==null?void 0:i.focus()},0)};function R(i){_=i,t(11,_)}return a.$$set=i=>{"id"in i&&t(1,A=i.id),"value"in i&&t(0,b=i.value),"placeholder"in i&&t(2,W=i.placeholder),"searchEnabled"in i&&t(3,V=i.searchEnabled),"searchPlaceholder"in i&&t(4,N=i.searchPlaceholder),"showTemporaryChatControl"in i&&t(5,Z=i.showTemporaryChatControl),"items"in i&&t(25,k=i.items),"className"in i&&t(6,P=i.className),"triggerClassName"in i&&t(7,C=i.triggerClassName),"$$scope"in i&&t(39,$=i.$$scope)},a.$$.update=()=>{if(a.$$.dirty[0]&100663297){let i=k.find(T=>T.value===b)??null;i===null&&(i=k.find(T=>s===Yt(T.model))??null),i?(t(13,B=i),t(0,b=i.value),t(14,S=k.indexOf(i))):(t(13,B=null),t(0,b=""),t(14,S=-1))}a.$$.dirty[0]&33555200&&t(16,l=ee?ke.search(ee).map(i=>i.item).filter(i=>{var T,j,q,F;return le===""?!0:(F=(q=(j=(T=i.model)==null?void 0:T.info)==null?void 0:j.meta)==null?void 0:q.tags)==null?void 0:F.map(U=>U.name).includes(le)}):k.filter(i=>{var T,j,q,F;return le===""?!0:(F=(q=(j=(T=i.model)==null?void 0:T.info)==null?void 0:j.meta)==null?void 0:q.tags)==null?void 0:F.map(U=>U.name).includes(le)}))},[b,A,W,V,N,Z,P,C,ee,le,f,_,m,B,S,oe,l,n,o,d,c,p,w,_e,pe,k,s,g,ye,$e,Ee,Me,De,Ce,Ve,Ie,Ne,Te,R,$]}class Bl extends gt{constructor(e){super(),_t(this,e,gl,hl,mt,{id:1,value:0,placeholder:2,searchEnabled:3,searchPlaceholder:4,showTemporaryChatControl:5,items:25,className:6,triggerClassName:7},null,[-1,-1])}}export{Bl as S,Al as e,Yt as i};
//# sourceMappingURL=Selector.BpiFjqjd.js.map
