import{s as mt,D as Le,E as He,a as I,d as h,f as v,i as z,g as k,n as ve,y as ht,A as pt,j as fe,p as vt,F as bt,q as wt,k as L,o as H,e as M,c as D,r as kt,v as $t,w as yt,x as Et,Q as be,t as Y,b as J,h as le,B as We,u as ce,H as Mt,N as we,a0 as Ze}from"./scheduler.DuUlakQd.js";import{S as gt,i as _t,f as Dt,b as Q,d as K,m as X,t as E,a as T,e as x,g as ae,c as re}from"./index.Ys3_BkIn.js";import{e as ne}from"./each.Dt38hqwP.js";import"./updater.PszAV25u.js";import{M as Ct,a as Vt,b as It}from"./menu-trigger.Dk14uO_q.js";import{m as qe}from"./marked.esm._0_gBwjO.js";import{F as Nt}from"./fuse.CU2r43ac.js";import{f as Tt}from"./index.BFuekP1B.js";import{C as zt}from"./ChevronDown.CwxqFfSg.js";import{C as Ot}from"./Check.BKW1UgYC.js";import{S as St}from"./Search.CkUbmifm.js";import{g as At,p as Bt,d as Pt}from"./index.B6ItjCT7.js";import{M as ge,a as jt,c as Lt,n as Ht,i as Wt,u as Zt,o as Ue,m as qt}from"./index.1_Kto-1t.js";import{t as ue}from"./Toaster.svelte_svelte_type_style_lang.DyiqXpXd.js";import{s as Ut,f as Fe}from"./index.DJ9SJzeG.js";import{g as Ft}from"./index.BoEvUtch.js";import{T as de}from"./Tooltip.CTp4haHe.js";import{S as Gt}from"./Switch.DK4Duy3T.js";import{g as Rt}from"./entry.iRBnVUpr.js";const Yt=a=>{if(!a||typeof a.name!="string")return console.error("isModelConfidential: Invalid model provided:",a),!1;if(a.name.startsWith("non-confidential"))return!1;if(a.name.startsWith("confidential"))return!0;console.error("isModelConfidential: Unable to determine confidentiality from model name:",a.name)},Al=(a,e)=>{if(!a||typeof a.name!="string")return console.error("extractModelName: Invalid model provided:",a),"";let t=a.name,l;return typeof e=="boolean"?(l=e,t=l?t.replace(/^confidential\.?/,""):t.replace(/^non-confidential\.?/,"")):t.startsWith("confidential")?(l=!0,t=t.replace(/^confidential\.?/,"")):t.startsWith("non-confidential")?(l=!1,t=t.replace(/^non-confidential\.?/,"")):(console.warn("extractModelName: Model name does not have a confidentiality prefix:",t),l=!1),t=t.trim(),l&&(t=`ðŸ”’ ${t}`),t};function Jt(a){let e,t;return{c(){e=Le("svg"),t=Le("path"),this.h()},l(l){e=He(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=I(e);t=He(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),I(t).forEach(h),r.forEach(h),this.h()},h(){v(t,"stroke-linecap","round"),v(t,"stroke-linejoin","round"),v(t,"d","M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z"),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"fill","none"),v(e,"viewBox","0 0 24 24"),v(e,"stroke-width",a[1]),v(e,"stroke","currentColor"),v(e,"class",a[0])},m(l,r){z(l,e,r),k(e,t)},p(l,[r]){r&2&&v(e,"stroke-width",l[1]),r&1&&v(e,"class",l[0])},i:ve,o:ve,d(l){l&&h(e)}}}function Qt(a,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return a.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class Kt extends gt{constructor(e){super(),_t(this,e,Qt,Jt,mt,{className:0,strokeWidth:1})}}function Ge(a,e,t){const l=a.slice();return l[44]=e[t],l}function Re(a,e,t){const l=a.slice();return l[47]=e[t],l[49]=t,l}function Ye(a,e,t){const l=a.slice();return l[50]=e[t],l}function Je(a,e,t){const l=a.slice();return l[50]=e[t],l}function Qe(a,e,t){const l=a.slice();return l[50]=e[t],l}function Xt(a){let e;return{c(){e=Y(a[2])},l(t){e=J(t,a[2])},m(t,l){z(t,e,l)},p(t,l){l[0]&4&&le(e,t[2])},d(t){t&&h(e)}}}function xt(a){let e=a[13].label+"",t;return{c(){t=Y(e)},l(l){t=J(l,e)},m(l,r){z(l,t,r)},p(l,r){r[0]&8192&&e!==(e=l[13].label+"")&&le(t,e)},d(l){l&&h(t)}}}function el(a){let e,t,l,r,o;function n(d,c){return d[13]?xt:Xt}let u=n(a),s=u(a);return l=new zt({props:{className:" self-center ml-2 size-3",strokeWidth:"2.5"}}),{c(){e=M("div"),s.c(),t=L(),Q(l.$$.fragment),this.h()},l(d){e=D(d,"DIV",{class:!0});var c=I(e);s.l(c),t=H(c),K(l.$$.fragment,c),c.forEach(h),this.h()},h(){v(e,"class",r="flex w-full text-left px-0.5 outline-hidden bg-transparent truncate "+a[7]+" justify-between font-medium placeholder-gray-400 focus:outline-hidden")},m(d,c){z(d,e,c),s.m(e,null),k(e,t),X(l,e,null),o=!0},p(d,c){u===(u=n(d))&&s?s.p(d,c):(s.d(1),s=u(d),s&&(s.c(),s.m(e,t))),(!o||c[0]&128&&r!==(r="flex w-full text-left px-0.5 outline-hidden bg-transparent truncate "+d[7]+" justify-between font-medium placeholder-gray-400 focus:outline-hidden"))&&v(e,"class",r)},i(d){o||(E(l.$$.fragment,d),o=!0)},o(d){T(l.$$.fragment,d),o=!1},d(d){d&&h(e),s.d(),x(l)}}}function Ke(a){let e,t,l,r,o,n,u;return t=new St({props:{className:"size-4",strokeWidth:"2.5"}}),{c(){e=M("div"),Q(t.$$.fragment),l=L(),r=M("input"),this.h()},l(s){e=D(s,"DIV",{class:!0});var d=I(e);K(t.$$.fragment,d),l=H(d),r=D(d,"INPUT",{id:!0,class:!0,placeholder:!0,autocomplete:!0}),d.forEach(h),this.h()},h(){v(r,"id","model-search-input"),v(r,"class","w-full text-sm bg-transparent outline-hidden"),v(r,"placeholder",a[4]),v(r,"autocomplete","off"),v(e,"class","flex items-center gap-2.5 px-5 mt-3.5 mb-1.5")},m(s,d){z(s,e,d),X(t,e,null),k(e,l),k(e,r),We(r,a[8]),o=!0,n||(u=[ce(r,"input",a[28]),ce(r,"keydown",a[29])],n=!0)},p(s,d){(!o||d[0]&16)&&v(r,"placeholder",s[4]),d[0]&256&&r.value!==s[8]&&We(r,s[8])},i(s){o||(E(t.$$.fragment,s),o=!0)},o(s){T(t.$$.fragment,s),o=!1},d(s){s&&h(e),x(t),n=!1,Mt(u)}}}function Xe(a){let e,t,l,r=a[18].t("All")+"",o,n,u,s,d,c=ne(a[12]),p=[];for(let g=0;g<c.length;g+=1)p[g]=xe(Qe(a,c,g));return{c(){e=M("div"),t=M("div"),l=M("button"),o=Y(r),u=L();for(let g=0;g<p.length;g+=1)p[g].c();this.h()},l(g){e=D(g,"DIV",{class:!0});var $=I(e);t=D($,"DIV",{class:!0});var w=I(t);l=D(w,"BUTTON",{class:!0});var O=I(l);o=J(O,r),O.forEach(h),u=H(w);for(let b=0;b<p.length;b+=1)p[b].l(w);w.forEach(h),$.forEach(h),this.h()},h(){v(l,"class",n="min-w-fit outline-none p-1.5 "+(a[9]===""?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),v(t,"class","flex gap-1 scrollbar-none overflow-x-auto w-fit text-center text-sm font-medium rounded-full bg-transparent px-1.5 pb-0.5"),v(e,"class","flex w-full sticky")},m(g,$){z(g,e,$),k(e,t),k(t,l),k(l,o),k(t,u);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(t,null);a[32](t),s||(d=ce(l,"click",a[30]),s=!0)},p(g,$){if($[0]&262144&&r!==(r=g[18].t("All")+"")&&le(o,r),$[0]&512&&n!==(n="min-w-fit outline-none p-1.5 "+(g[9]===""?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&v(l,"class",n),$[0]&4608){c=ne(g[12]);let w;for(w=0;w<c.length;w+=1){const O=Qe(g,c,w);p[w]?p[w].p(O,$):(p[w]=xe(O),p[w].c(),p[w].m(t,null))}for(;w<p.length;w+=1)p[w].d(1);p.length=c.length}},d(g){g&&h(e),be(p,g),a[32](null),s=!1,d()}}}function xe(a){let e,t=a[50]+"",l,r,o,n,u;function s(){return a[31](a[50])}return{c(){e=M("button"),l=Y(t),r=L(),this.h()},l(d){e=D(d,"BUTTON",{class:!0});var c=I(e);l=J(c,t),r=H(c),c.forEach(h),this.h()},h(){v(e,"class",o="min-w-fit outline-none p-1.5 "+(a[9]===a[50]?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")},m(d,c){z(d,e,c),k(e,l),k(e,r),n||(u=ce(e,"click",s),n=!0)},p(d,c){a=d,c[0]&4096&&t!==(t=a[50]+"")&&le(l,t),c[0]&4608&&o!==(o="min-w-fit outline-none p-1.5 "+(a[9]===a[50]?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&v(e,"class",o)},d(d){d&&h(e),n=!1,u()}}}function et(a){let e,t,l=a[18].t("No results found")+"",r;return{c(){e=M("div"),t=M("div"),r=Y(l),this.h()},l(o){e=D(o,"DIV",{});var n=I(e);t=D(n,"DIV",{class:!0});var u=I(t);r=J(u,l),u.forEach(h),n.forEach(h),this.h()},h(){v(t,"class","block px-3 py-2 text-sm text-gray-700 dark:text-gray-100")},m(o,n){z(o,e,n),k(e,t),k(t,r)},p(o,n){n[0]&262144&&l!==(l=o[18].t("No results found")+"")&&le(r,l)},d(o){o&&h(e)}}}function tt(a){var r,o;let e,t=ne((o=(r=a[47].model)==null?void 0:r.info)==null?void 0:o.meta.tags),l=[];for(let n=0;n<t.length;n+=1)l[n]=lt(Je(a,t,n));return{c(){e=M("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=D(n,"DIV",{class:!0});var u=I(e);for(let s=0;s<l.length;s+=1)l[s].l(u);u.forEach(h),this.h()},h(){v(e,"class","flex gap-0.5 self-start h-full mb-1.5 -translate-x-1")},m(n,u){z(n,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(n,u){var s,d;if(u[0]&65536){t=ne((d=(s=n[47].model)==null?void 0:s.info)==null?void 0:d.meta.tags);let c;for(c=0;c<t.length;c+=1){const p=Je(n,t,c);l[c]?l[c].p(p,u):(l[c]=lt(p),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=t.length}},d(n){n&&h(e),be(l,n)}}}function lt(a){let e,t=a[50].name+"",l,r;return{c(){e=M("div"),l=Y(t),r=L(),this.h()},l(o){e=D(o,"DIV",{class:!0});var n=I(e);l=J(n,t),r=H(n),n.forEach(h),this.h()},h(){v(e,"class","text-xs font-bold px-1 rounded-sm uppercase line-clamp-1 bg-gray-500/20 text-gray-700 dark:text-gray-200")},m(o,n){z(o,e,n),k(e,l),k(e,r)},p(o,n){n[0]&65536&&t!==(t=o[50].name+"")&&le(l,t)},d(o){o&&h(e)}}}function tl(a){let e,t,l,r=a[47].label+"",o;return{c(){e=M("img"),l=L(),o=Y(r),this.h()},l(n){e=D(n,"IMG",{src:!0,alt:!0,class:!0}),l=H(n),o=J(n,r),this.h()},h(){var n,u,s;Ze(e.src,t=((s=(u=(n=a[47].model)==null?void 0:n.info)==null?void 0:u.meta)==null?void 0:s.profile_image_url)??"/static/favicon.png")||v(e,"src",t),v(e,"alt","Model"),v(e,"class","rounded-full size-5 flex items-center mr-2")},m(n,u){z(n,e,u),z(n,l,u),z(n,o,u)},p(n,u){var s,d,c;u[0]&65536&&!Ze(e.src,t=((c=(d=(s=n[47].model)==null?void 0:s.info)==null?void 0:d.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")&&v(e,"src",t),u[0]&65536&&r!==(r=n[47].label+"")&&le(o,r)},d(n){n&&(h(e),h(l),h(o))}}}function at(a){var r,o,n,u,s,d;let e,t,l;return t=new de({props:{content:`${(o=(r=a[47].model.ollama)==null?void 0:r.details)!=null&&o.quantization_level?((u=(n=a[47].model.ollama)==null?void 0:n.details)==null?void 0:u.quantization_level)+" ":""}${(s=a[47].model.ollama)!=null&&s.size?`(${(((d=a[47].model.ollama)==null?void 0:d.size)/1024**3).toFixed(1)}GB)`:""}`,className:"self-end",$$slots:{default:[ll]},$$scope:{ctx:a}}}),{c(){e=M("div"),Q(t.$$.fragment),this.h()},l(c){e=D(c,"DIV",{class:!0});var p=I(e);K(t.$$.fragment,p),p.forEach(h),this.h()},h(){v(e,"class","flex ml-1 items-center translate-y-[0.5px]")},m(c,p){z(c,e,p),X(t,e,null),l=!0},p(c,p){var $,w,O,b,W,V;const g={};p[0]&65536&&(g.content=`${(w=($=c[47].model.ollama)==null?void 0:$.details)!=null&&w.quantization_level?((b=(O=c[47].model.ollama)==null?void 0:O.details)==null?void 0:b.quantization_level)+" ":""}${(W=c[47].model.ollama)!=null&&W.size?`(${(((V=c[47].model.ollama)==null?void 0:V.size)/1024**3).toFixed(1)}GB)`:""}`),p[0]&65536|p[1]&256&&(g.$$scope={dirty:p,ctx:c}),t.$set(g)},i(c){l||(E(t.$$.fragment,c),l=!0)},o(c){T(t.$$.fragment,c),l=!1},d(c){c&&h(e),x(t)}}}function ll(a){var r,o;let e,t=(((o=(r=a[47].model.ollama)==null?void 0:r.details)==null?void 0:o.parameter_size)??"")+"",l;return{c(){e=M("span"),l=Y(t),this.h()},l(n){e=D(n,"SPAN",{class:!0});var u=I(e);l=J(u,t),u.forEach(h),this.h()},h(){v(e,"class","text-xs font-medium text-gray-600 dark:text-gray-400 line-clamp-1")},m(n,u){z(n,e,u),k(e,l)},p(n,u){var s,d;u[0]&65536&&t!==(t=(((d=(s=n[47].model.ollama)==null?void 0:s.details)==null?void 0:d.parameter_size)??"")+"")&&le(l,t)},d(n){n&&h(e)}}}function al(a){let e,t;return e=new de({props:{content:"External",$$slots:{default:[nl]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){X(e,l,r),t=!0},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function rl(a){let e,t;return e=new de({props:{content:"Direct",$$slots:{default:[ol]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){X(e,l,r),t=!0},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function nl(a){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z" clip-rule="evenodd"></path></svg>';return{c(){e=M("div"),e.innerHTML=t,this.h()},l(l){e=D(l,"DIV",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-n3uai6"&&(e.innerHTML=t),this.h()},h(){v(e,"class","translate-y-[1px]")},m(l,r){z(l,e,r)},p:ve,d(l){l&&h(e)}}}function ol(a){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M2 2.75A.75.75 0 0 1 2.75 2C8.963 2 14 7.037 14 13.25a.75.75 0 0 1-1.5 0c0-5.385-4.365-9.75-9.75-9.75A.75.75 0 0 1 2 2.75Zm0 4.5a.75.75 0 0 1 .75-.75 6.75 6.75 0 0 1 6.75 6.75.75.75 0 0 1-1.5 0C8 10.35 5.65 8 2.75 8A.75.75 0 0 1 2 7.25ZM3.5 11a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z" clip-rule="evenodd"></path></svg>';return{c(){e=M("div"),e.innerHTML=t,this.h()},l(l){e=D(l,"DIV",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-1dup7go"&&(e.innerHTML=t),this.h()},h(){v(e,"class","translate-y-[1px]")},m(l,r){z(l,e,r)},p:ve,d(l){l&&h(e)}}}function rt(a){var l,r,o;let e,t;return e=new de({props:{content:`${qe.parse(Fe((o=(r=(l=a[47].model)==null?void 0:l.info)==null?void 0:r.meta)==null?void 0:o.description).replaceAll(`
`,"<br>"))}`,$$slots:{default:[sl]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,u){X(e,n,u),t=!0},p(n,u){var d,c,p;const s={};u[0]&65536&&(s.content=`${qe.parse(Fe((p=(c=(d=n[47].model)==null?void 0:d.info)==null?void 0:c.meta)==null?void 0:p.description).replaceAll(`
`,"<br>"))}`),u[1]&256&&(s.$$scope={dirty:u,ctx:n}),e.$set(s)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){x(e,n)}}}function sl(a){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>';return{c(){e=M("div"),e.innerHTML=t,this.h()},l(l){e=D(l,"DIV",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-1mqbvzr"&&(e.innerHTML=t),this.h()},h(){v(e,"class","translate-y-[1px]")},m(l,r){z(l,e,r)},p:ve,d(l){l&&h(e)}}}function nt(a){var n,u;let e,t,l=ne((u=(n=a[47].model)==null?void 0:n.info)==null?void 0:u.meta.tags),r=[];for(let s=0;s<l.length;s+=1)r[s]=ot(Ye(a,l,s));const o=s=>T(r[s],1,1,()=>{r[s]=null});return{c(){e=M("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=D(s,"DIV",{class:!0});var d=I(e);for(let c=0;c<r.length;c+=1)r[c].l(d);d.forEach(h),this.h()},h(){v(e,"class","flex gap-0.5 self-center items-center h-full translate-y-[0.5px] overflow-x-auto scrollbar-none")},m(s,d){z(s,e,d);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);t=!0},p(s,d){var c,p;if(d[0]&65536){l=ne((p=(c=s[47].model)==null?void 0:c.info)==null?void 0:p.meta.tags);let g;for(g=0;g<l.length;g+=1){const $=Ye(s,l,g);r[g]?(r[g].p($,d),E(r[g],1)):(r[g]=ot($),r[g].c(),E(r[g],1),r[g].m(e,null))}for(ae(),g=l.length;g<r.length;g+=1)o(g);re()}},i(s){if(!t){for(let d=0;d<l.length;d+=1)E(r[d]);t=!0}},o(s){r=r.filter(Boolean);for(let d=0;d<r.length;d+=1)T(r[d]);t=!1},d(s){s&&h(e),be(r,s)}}}function il(a){let e,t=a[50].name+"",l,r;return{c(){e=M("div"),l=Y(t),r=L(),this.h()},l(o){e=D(o,"DIV",{class:!0});var n=I(e);l=J(n,t),n.forEach(h),r=H(o),this.h()},h(){v(e,"class","text-xs font-bold px-1 rounded-sm uppercase bg-gray-500/20 text-gray-700 dark:text-gray-200")},m(o,n){z(o,e,n),k(e,l),z(o,r,n)},p(o,n){n[0]&65536&&t!==(t=o[50].name+"")&&le(l,t)},d(o){o&&(h(e),h(r))}}}function ot(a){let e,t;return e=new de({props:{content:a[50].name,className:"flex-shrink-0",$$slots:{default:[il]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){X(e,l,r),t=!0},p(l,r){const o={};r[0]&65536&&(o.content=l[50].name),r[0]&65536|r[1]&256&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function st(a){let e,t,l;return t=new Ot({}),{c(){e=M("div"),Q(t.$$.fragment),this.h()},l(r){e=D(r,"DIV",{class:!0});var o=I(e);K(t.$$.fragment,o),o.forEach(h),this.h()},h(){v(e,"class","ml-auto pl-2 pr-2 md:pr-0")},m(r,o){z(r,e,o),X(t,e,null),l=!0},i(r){l||(E(t.$$.fragment,r),l=!0)},o(r){T(t.$$.fragment,r),l=!1},d(r){r&&h(e),x(t)}}}function it(a){var oe,ee,ke,_e,pe,$e,ye,Ee,Me,De,Ce,Ve,Ie,Ne,Te;let e,t,l,r,o,n,u,s,d,c,p,g,$,w,O,b,W,V,N,Z,y=a[19]&&(((_e=(ke=(ee=(oe=a[47])==null?void 0:oe.model)==null?void 0:ee.info)==null?void 0:ke.meta)==null?void 0:_e.tags)??[]).length>0&&tt(a);s=new de({props:{content:((pe=a[20])==null?void 0:pe.role)==="admin"?(($e=a[47])==null?void 0:$e.value)??"":"",placement:"top-start",$$slots:{default:[tl]},$$scope:{ctx:a}}});let B=a[47].model.owned_by==="ollama"&&(((Ee=(ye=a[47].model.ollama)==null?void 0:ye.details)==null?void 0:Ee.parameter_size)??"")!==""&&at(a);const C=[rl,al],f=[];function _(R,i){var S;return(S=R[47].model)!=null&&S.direct?0:R[47].model.owned_by==="openai"?1:-1}~(p=_(a))&&(g=f[p]=C[p](a));let m=((Ce=(De=(Me=a[47].model)==null?void 0:Me.info)==null?void 0:De.meta)==null?void 0:Ce.description)&&rt(a),A=!a[19]&&(((Te=(Ne=(Ie=(Ve=a[47])==null?void 0:Ve.model)==null?void 0:Ie.info)==null?void 0:Ne.meta)==null?void 0:Te.tags)??[]).length>0&&nt(a),P=a[0]===a[47].value&&st();function te(){return a[33](a[47],a[49])}return{c(){e=M("button"),t=M("div"),y&&y.c(),l=L(),r=M("div"),o=M("div"),n=M("div"),u=M("div"),Q(s.$$.fragment),d=L(),B&&B.c(),c=L(),g&&g.c(),$=L(),m&&m.c(),w=L(),A&&A.c(),O=L(),P&&P.c(),this.h()},l(R){e=D(R,"BUTTON",{"aria-label":!0,class:!0,"data-arrow-selected":!0});var i=I(e);t=D(i,"DIV",{class:!0});var S=I(t);y&&y.l(S),l=H(S),r=D(S,"DIV",{class:!0});var j=I(r);o=D(j,"DIV",{class:!0});var q=I(o);n=D(q,"DIV",{class:!0});var F=I(n);u=D(F,"DIV",{class:!0});var U=I(u);K(s.$$.fragment,U),U.forEach(h),F.forEach(h),d=H(q),B&&B.l(q),q.forEach(h),c=H(j),g&&g.l(j),$=H(j),m&&m.l(j),w=H(j),A&&A.l(j),j.forEach(h),S.forEach(h),O=H(i),P&&P.l(i),i.forEach(h),this.h()},h(){v(u,"class","flex items-center min-w-fit"),v(n,"class","line-clamp-1"),v(o,"class","flex items-center min-w-fit"),v(r,"class","flex items-center gap-2"),v(t,"class","flex flex-col"),v(e,"aria-label","model-item"),v(e,"class",b="flex w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted "+(a[49]===a[15]?"bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent":"")),v(e,"data-arrow-selected",W=a[49]===a[15])},m(R,i){z(R,e,i),k(e,t),y&&y.m(t,null),k(t,l),k(t,r),k(r,o),k(o,n),k(n,u),X(s,u,null),k(o,d),B&&B.m(o,null),k(r,c),~p&&f[p].m(r,null),k(r,$),m&&m.m(r,null),k(r,w),A&&A.m(r,null),k(e,O),P&&P.m(e,null),V=!0,N||(Z=ce(e,"click",te),N=!0)},p(R,i){var q,F,U,me,he,se,G,ie,ze,Oe,Se,Ae,Be,Pe,je;a=R,a[19]&&(((me=(U=(F=(q=a[47])==null?void 0:q.model)==null?void 0:F.info)==null?void 0:U.meta)==null?void 0:me.tags)??[]).length>0?y?y.p(a,i):(y=tt(a),y.c(),y.m(t,l)):y&&(y.d(1),y=null);const S={};i[0]&1114112&&(S.content=((he=a[20])==null?void 0:he.role)==="admin"?((se=a[47])==null?void 0:se.value)??"":""),i[0]&65536|i[1]&256&&(S.$$scope={dirty:i,ctx:a}),s.$set(S),a[47].model.owned_by==="ollama"&&(((ie=(G=a[47].model.ollama)==null?void 0:G.details)==null?void 0:ie.parameter_size)??"")!==""?B?(B.p(a,i),i[0]&65536&&E(B,1)):(B=at(a),B.c(),E(B,1),B.m(o,null)):B&&(ae(),T(B,1,1,()=>{B=null}),re());let j=p;p=_(a),p!==j&&(g&&(ae(),T(f[j],1,1,()=>{f[j]=null}),re()),~p?(g=f[p],g||(g=f[p]=C[p](a),g.c()),E(g,1),g.m(r,$)):g=null),(Se=(Oe=(ze=a[47].model)==null?void 0:ze.info)==null?void 0:Oe.meta)!=null&&Se.description?m?(m.p(a,i),i[0]&65536&&E(m,1)):(m=rt(a),m.c(),E(m,1),m.m(r,w)):m&&(ae(),T(m,1,1,()=>{m=null}),re()),!a[19]&&(((je=(Pe=(Be=(Ae=a[47])==null?void 0:Ae.model)==null?void 0:Be.info)==null?void 0:Pe.meta)==null?void 0:je.tags)??[]).length>0?A?(A.p(a,i),i[0]&589824&&E(A,1)):(A=nt(a),A.c(),E(A,1),A.m(r,null)):A&&(ae(),T(A,1,1,()=>{A=null}),re()),a[0]===a[47].value?P?i[0]&65537&&E(P,1):(P=st(),P.c(),E(P,1),P.m(e,null)):P&&(ae(),T(P,1,1,()=>{P=null}),re()),(!V||i[0]&32768&&b!==(b="flex w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted "+(a[49]===a[15]?"bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent":"")))&&v(e,"class",b),(!V||i[0]&32768&&W!==(W=a[49]===a[15]))&&v(e,"data-arrow-selected",W)},i(R){V||(E(s.$$.fragment,R),E(B),E(g),E(m),E(A),E(P),V=!0)},o(R){T(s.$$.fragment,R),T(B),T(g),T(m),T(A),T(P),V=!1},d(R){R&&h(e),y&&y.d(),x(s),B&&B.d(),~p&&f[p].d(),m&&m.d(),A&&A.d(),P&&P.d(),N=!1,Z()}}}function ft(a){let e,t;return e=new de({props:{content:a[18].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:a[8]}),placement:"top-start",$$slots:{default:[fl]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,r){X(e,l,r),t=!0},p(l,r){const o={};r[0]&262400&&(o.content=l[18].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:l[8]})),r[0]&262400|r[1]&256&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function fl(a){let e,t,l=a[18].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:a[8]})+"",r,o,n;return{c(){e=M("button"),t=M("div"),r=Y(l),this.h()},l(u){e=D(u,"BUTTON",{class:!0});var s=I(e);t=D(s,"DIV",{class:!0});var d=I(t);r=J(d,l),d.forEach(h),s.forEach(h),this.h()},h(){v(t,"class","truncate"),v(e,"class","flex w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted")},m(u,s){z(u,e,s),k(e,t),k(t,r),o||(n=ce(e,"click",a[34]),o=!0)},p(u,s){s[0]&262400&&l!==(l=u[18].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:u[8]})+"")&&le(r,l)},d(u){u&&h(e),o=!1,n()}}}function ut(a){let e,t=a[17][a[44]].digest+"",l;return{c(){e=M("div"),l=Y(t),this.h()},l(r){e=D(r,"DIV",{class:!0});var o=I(e);l=J(o,t),o.forEach(h),this.h()},h(){v(e,"class","-mt-1 h-fit text-[0.7rem] dark:text-gray-500 line-clamp-1")},m(r,o){z(r,e,o),k(e,l)},p(r,o){o[0]&131072&&t!==(t=r[17][r[44]].digest+"")&&le(l,t)},d(r){r&&h(e)}}}function ul(a){let e,t='<svg class="w-4 h-4 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6"></path></svg>',l,r;function o(){return a[35](a[44])}return{c(){e=M("button"),e.innerHTML=t,this.h()},l(n){e=D(n,"BUTTON",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-19bzgft"&&(e.innerHTML=t),this.h()},h(){v(e,"class","text-gray-800 dark:text-gray-100")},m(n,u){z(n,e,u),l||(r=ce(e,"click",o),l=!0)},p(n,u){a=n},d(n){n&&h(e),l=!1,r()}}}function ct(a){let e,t,l,r=`<svg class="size-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
											transform-origin: center;
											animation: spinner_AtaB 0.75s infinite linear;
										}
										@keyframes spinner_AtaB {
											100% {
												transform: rotate(360deg);
											}
										}
									</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`,o,n,u,s,d,c=a[44]+"",p,g,$,w,O="pullProgress"in a[17][a[44]]?`(${a[17][a[44]].pullProgress}%)`:"",b,W,V,N,Z,y,B,C="digest"in a[17][a[44]]&&a[17][a[44]].digest&&ut(a);return Z=new de({props:{content:a[18].t("Cancel"),$$slots:{default:[ul]},$$scope:{ctx:a}}}),{c(){e=M("div"),t=M("div"),l=M("div"),l.innerHTML=r,o=L(),n=M("div"),u=M("div"),s=M("div"),d=Y('Downloading "'),p=Y(c),g=Y('"'),$=L(),w=M("div"),b=Y(O),W=L(),C&&C.c(),V=L(),N=M("div"),Q(Z.$$.fragment),y=L(),this.h()},l(f){e=D(f,"DIV",{class:!0});var _=I(e);t=D(_,"DIV",{class:!0});var m=I(t);l=D(m,"DIV",{class:!0,"data-svelte-h":!0}),we(l)!=="svelte-102rp4j"&&(l.innerHTML=r),o=H(m),n=D(m,"DIV",{class:!0});var A=I(n);u=D(A,"DIV",{class:!0});var P=I(u);s=D(P,"DIV",{class:!0});var te=I(s);d=J(te,'Downloading "'),p=J(te,c),g=J(te,'"'),te.forEach(h),$=H(P),w=D(P,"DIV",{class:!0});var oe=I(w);b=J(oe,O),oe.forEach(h),P.forEach(h),W=H(A),C&&C.l(A),A.forEach(h),m.forEach(h),V=H(_),N=D(_,"DIV",{class:!0});var ee=I(N);K(Z.$$.fragment,ee),ee.forEach(h),y=H(_),_.forEach(h),this.h()},h(){v(l,"class","-ml-2 mr-2.5 translate-y-0.5"),v(s,"class","line-clamp-1"),v(w,"class","shrink-0"),v(u,"class","flex gap-1"),v(n,"class","flex flex-col self-start"),v(t,"class","flex"),v(N,"class","mr-2 ml-1 translate-y-0.5"),v(e,"class","flex w-full justify-between font-medium select-none rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 rounded-lg cursor-pointer data-highlighted:bg-muted")},m(f,_){z(f,e,_),k(e,t),k(t,l),k(t,o),k(t,n),k(n,u),k(u,s),k(s,d),k(s,p),k(s,g),k(u,$),k(u,w),k(w,b),k(n,W),C&&C.m(n,null),k(e,V),k(e,N),X(Z,N,null),k(e,y),B=!0},p(f,_){(!B||_[0]&131072)&&c!==(c=f[44]+"")&&le(p,c),(!B||_[0]&131072)&&O!==(O="pullProgress"in f[17][f[44]]?`(${f[17][f[44]].pullProgress}%)`:"")&&le(b,O),"digest"in f[17][f[44]]&&f[17][f[44]].digest?C?C.p(f,_):(C=ut(f),C.c(),C.m(n,null)):C&&(C.d(1),C=null);const m={};_[0]&262144&&(m.content=f[18].t("Cancel")),_[0]&131072|_[1]&256&&(m.$$scope={dirty:_,ctx:f}),Z.$set(m)},i(f){B||(E(Z.$$.fragment,f),B=!0)},o(f){T(Z.$$.fragment,f),B=!1},d(f){f&&h(e),C&&C.d(),x(Z)}}}function dt(a){let e,t,l,r,o,n,u,s=a[18].t("Temporary Chat")+"",d,c,p,g,$,w,O;return n=new Kt({props:{className:"size-4",strokeWidth:"2.5"}}),g=new Gt({props:{state:a[21]}}),{c(){e=M("hr"),t=L(),l=M("div"),r=M("button"),o=M("div"),Q(n.$$.fragment),u=L(),d=Y(s),c=L(),p=M("div"),Q(g.$$.fragment),this.h()},l(b){e=D(b,"HR",{class:!0}),t=H(b),l=D(b,"DIV",{class:!0});var W=I(l);r=D(W,"BUTTON",{class:!0});var V=I(r);o=D(V,"DIV",{class:!0});var N=I(o);K(n.$$.fragment,N),u=H(N),d=J(N,s),N.forEach(h),c=H(V),p=D(V,"DIV",{});var Z=I(p);K(g.$$.fragment,Z),Z.forEach(h),V.forEach(h),W.forEach(h),this.h()},h(){v(e,"class","border-gray-100 dark:border-gray-800"),v(o,"class","flex gap-2.5 items-center"),v(r,"class","flex justify-between w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 px-3 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted"),v(l,"class","flex items-center mx-2 my-2")},m(b,W){z(b,e,W),z(b,t,W),z(b,l,W),k(l,r),k(r,o),X(n,o,null),k(o,u),k(o,d),k(r,c),k(r,p),X(g,p,null),$=!0,w||(O=ce(r,"click",a[36]),w=!0)},p(b,W){(!$||W[0]&262144)&&s!==(s=b[18].t("Temporary Chat")+"")&&le(d,s);const V={};W[0]&2097152&&(V.state=b[21]),g.$set(V)},i(b){$||(E(n.$$.fragment,b),E(g.$$.fragment,b),$=!0)},o(b){T(n.$$.fragment,b),T(g.$$.fragment,b),$=!1},d(b){b&&(h(e),h(t),h(l)),x(n),x(g),w=!1,O()}}}function cl(a){let e,t,l,r,o=!(a[8].trim()in a[17])&&a[8]&&a[14]&&a[20].role==="admin",n,u,s,d,c,p,g,$=a[3]&&Ke(a),w=a[12]&&Xe(a),O=ne(a[16]),b=[];for(let f=0;f<O.length;f+=1)b[f]=it(Re(a,O,f));const W=f=>T(b[f],1,1,()=>{b[f]=null});let V=null;O.length||(V=et(a));let N=o&&ft(a),Z=ne(Object.keys(a[17])),y=[];for(let f=0;f<Z.length;f+=1)y[f]=ct(Ge(a,Z,f));const B=f=>T(y[f],1,1,()=>{y[f]=null});let C=a[5]&&dt(a);return{c(){$&&$.c(),e=L(),t=M("div"),w&&w.c(),l=L();for(let f=0;f<b.length;f+=1)b[f].c();V&&V.c(),r=L(),N&&N.c(),n=L();for(let f=0;f<y.length;f+=1)y[f].c();u=L(),C&&C.c(),s=L(),d=M("div"),c=L(),p=M("div"),this.h()},l(f){$&&$.l(f),e=H(f),t=D(f,"DIV",{class:!0});var _=I(t);w&&w.l(_),l=H(_);for(let m=0;m<b.length;m+=1)b[m].l(_);V&&V.l(_),r=H(_),N&&N.l(_),n=H(_);for(let m=0;m<y.length;m+=1)y[m].l(_);_.forEach(h),u=H(f),C&&C.l(f),s=H(f),d=D(f,"DIV",{class:!0}),I(d).forEach(h),c=H(f),p=D(f,"DIV",{class:!0}),I(p).forEach(h),this.h()},h(){v(t,"class","px-3 mb-2 max-h-64 overflow-y-auto scrollbar-hidden group relative"),v(d,"class","hidden w-[42rem]"),v(p,"class","hidden w-[32rem]")},m(f,_){$&&$.m(f,_),z(f,e,_),z(f,t,_),w&&w.m(t,null),k(t,l);for(let m=0;m<b.length;m+=1)b[m]&&b[m].m(t,null);V&&V.m(t,null),k(t,r),N&&N.m(t,null),k(t,n);for(let m=0;m<y.length;m+=1)y[m]&&y[m].m(t,null);z(f,u,_),C&&C.m(f,_),z(f,s,_),z(f,d,_),z(f,c,_),z(f,p,_),g=!0},p(f,_){if(f[3]?$?($.p(f,_),_[0]&8&&E($,1)):($=Ke(f),$.c(),E($,1),$.m(e.parentNode,e)):$&&(ae(),T($,1,1,()=>{$=null}),re()),f[12]?w?w.p(f,_):(w=Xe(f),w.c(),w.m(t,l)):w&&(w.d(1),w=null),_[0]&1935361){O=ne(f[16]);let m;for(m=0;m<O.length;m+=1){const A=Re(f,O,m);b[m]?(b[m].p(A,_),E(b[m],1)):(b[m]=it(A),b[m].c(),E(b[m],1),b[m].m(t,r))}for(ae(),m=O.length;m<b.length;m+=1)W(m);re(),!O.length&&V?V.p(f,_):O.length?V&&(V.d(1),V=null):(V=et(f),V.c(),V.m(t,r))}if(_[0]&1196288&&(o=!(f[8].trim()in f[17])&&f[8]&&f[14]&&f[20].role==="admin"),o?N?(N.p(f,_),_[0]&1196288&&E(N,1)):(N=ft(f),N.c(),E(N,1),N.m(t,n)):N&&(ae(),T(N,1,1,()=>{N=null}),re()),_[0]&17170432){Z=ne(Object.keys(f[17]));let m;for(m=0;m<Z.length;m+=1){const A=Ge(f,Z,m);y[m]?(y[m].p(A,_),E(y[m],1)):(y[m]=ct(A),y[m].c(),E(y[m],1),y[m].m(t,null))}for(ae(),m=Z.length;m<y.length;m+=1)B(m);re()}f[5]?C?(C.p(f,_),_[0]&32&&E(C,1)):(C=dt(f),C.c(),E(C,1),C.m(s.parentNode,s)):C&&(ae(),T(C,1,1,()=>{C=null}),re())},i(f){if(!g){E($);for(let _=0;_<O.length;_+=1)E(b[_]);E(N);for(let _=0;_<Z.length;_+=1)E(y[_]);E(C),g=!0}},o(f){T($),b=b.filter(Boolean);for(let _=0;_<b.length;_+=1)T(b[_]);T(N),y=y.filter(Boolean);for(let _=0;_<y.length;_+=1)T(y[_]);T(C),g=!1},d(f){f&&(h(e),h(t),h(u),h(s),h(d),h(c),h(p)),$&&$.d(f),w&&w.d(),be(b,f),V&&V.d(),N&&N.d(),be(y,f),C&&C.d(f)}}}function dl(a){let e;const t=a[27].default,l=kt(t,a,a[39],null),r=l||cl(a);return{c(){r&&r.c()},l(o){r&&r.l(o)},m(o,n){r&&r.m(o,n),e=!0},p(o,n){l?l.p&&(!e||n[1]&256)&&$t(l,t,o,o[39],e?Et(t,o[39],n,null):yt(o[39]),null):r&&r.p&&(!e||n[0]&4185913)&&r.p(o,e?n:[-1,-1])},i(o){e||(E(r,o),e=!0)},o(o){T(r,o),e=!1},d(o){r&&r.d(o)}}}function ml(a){let e,t,l,r;return e=new Vt({props:{class:"relative w-full font-primary","aria-label":a[2],id:"model-selector-"+a[1]+"-button",$$slots:{default:[el]},$$scope:{ctx:a}}}),l=new It({props:{class:" z-40 "+(a[19]?"w-full":`${a[6]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden",transition:Tt,side:a[19]?"bottom":"bottom-start",sideOffset:3,$$slots:{default:[dl]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment),t=L(),Q(l.$$.fragment)},l(o){K(e.$$.fragment,o),t=H(o),K(l.$$.fragment,o)},m(o,n){X(e,o,n),z(o,t,n),X(l,o,n),r=!0},p(o,n){const u={};n[0]&4&&(u["aria-label"]=o[2]),n[0]&2&&(u.id="model-selector-"+o[1]+"-button"),n[0]&8324|n[1]&256&&(u.$$scope={dirty:n,ctx:o}),e.$set(u);const s={};n[0]&524352&&(s.class=" z-40 "+(o[19]?"w-full":`${o[6]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden"),n[0]&524288&&(s.side=o[19]?"bottom":"bottom-start"),n[0]&4185913|n[1]&256&&(s.$$scope={dirty:n,ctx:o}),l.$set(s)},i(o){r||(E(e.$$.fragment,o),E(l.$$.fragment,o),r=!0)},o(o){T(e.$$.fragment,o),T(l.$$.fragment,o),r=!1},d(o){o&&h(t),x(e,o),x(l,o)}}}function hl(a){let e,t,l;function r(n){a[38](n)}let o={onOpenChange:a[37],closeFocus:!1,$$slots:{default:[ml]},$$scope:{ctx:a}};return a[11]!==void 0&&(o.open=a[11]),e=new Ct({props:o}),ht.push(()=>Dt(e,"open",r)),{c(){Q(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,u){X(e,n,u),l=!0},p(n,u){const s={};u[0]&33024&&(s.onOpenChange=n[37]),u[0]&4194303|u[1]&256&&(s.$$scope={dirty:u,ctx:n}),!t&&u[0]&2048&&(t=!0,s.open=n[11],pt(()=>t=!1)),e.$set(s)},i(n){l||(E(e.$$.fragment,n),l=!0)},o(n){T(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function gl(a,e,t){let l,r,o,n,u,s,d,c,p;fe(a,ge,i=>t(17,r=i)),fe(a,jt,i=>t(40,n=i)),fe(a,Lt,i=>t(41,u=i)),fe(a,Ht,i=>t(26,s=i)),fe(a,Wt,i=>t(19,d=i)),fe(a,Zt,i=>t(20,c=i)),fe(a,Ue,i=>t(21,p=i));let{$$slots:g={},$$scope:$}=e;const w=vt("i18n");fe(a,w,i=>t(18,o=i)),bt();let{id:O=""}=e,{value:b=""}=e,{placeholder:W="Select a model"}=e,{searchEnabled:V=!0}=e,{searchPlaceholder:N=o.t("Search a model")}=e,{showTemporaryChatControl:Z=!1}=e,{items:y=[]}=e,{className:B="w-[32rem]"}=e,{triggerClassName:C="text-lg"}=e,f,_=!1,m=[],A="",P="",te="",oe=null,ee=0;const ke=new Nt(y.map(i=>{var j,q,F,U,me,he,se,G;return{...i,modelName:(j=i.model)==null?void 0:j.name,tags:(me=(U=(F=(q=i.model)==null?void 0:q.info)==null?void 0:F.meta)==null?void 0:U.tags)==null?void 0:me.map(ie=>ie.name).join(" "),desc:(G=(se=(he=i.model)==null?void 0:he.info)==null?void 0:se.meta)==null?void 0:G.description}}),{keys:["value","tags","modelName"],threshold:.4}),_e=async()=>{var q;const i=P.trim().replace(/^ollama\s+(run|pull)\s+/,"");if(console.log(r),r[i]){ue.error(o.t("Model '{{modelTag}}' is already in queue for downloading.",{modelTag:i}));return}if(Object.keys(r).length===3){ue.error(o.t("Maximum of 3 models can be downloaded simultaneously. Please try again later."));return}const[S,j]=await Bt(localStorage.token,i,"0").catch(F=>(ue.error(`${F}`),null));if(S){const F=S.body.pipeThrough(new TextDecoderStream).pipeThrough(Ut(`
`)).getReader();for(ge.set({...r,[i]:{...r[i],abortController:j,reader:F,done:!1}});;)try{const{value:U,done:me}=await F.read();if(me)break;let he=U.split(`
`);for(const se of he)if(se!==""){let G=JSON.parse(se);if(console.log(G),G.error)throw G.error;if(G.detail)throw G.detail;if(G.status)if(G.digest){let ie=0;G.completed?ie=Math.round(G.completed/G.total*1e3)/10:ie=100,ge.set({...r,[i]:{...r[i],pullProgress:ie,digest:G.digest}})}else ue.success(G.status),ge.set({...r,[i]:{...r[i],done:G.status==="success"}})}}catch(U){console.log(U),typeof U!="string"&&(U=U.message),ue.error(`${U}`);break}r[i].done?(ue.success(o.t("Model '{{modelName}}' has been successfully downloaded.",{modelName:i})),qt.set(await Ft(localStorage.token,((q=u==null?void 0:u.features)==null?void 0:q.enable_direct_connections)&&((n==null?void 0:n.directConnections)??null)))):ue.error(o.t("Download canceled")),delete r[i],ge.set({...r})}};wt(async()=>{t(14,oe=await At(localStorage.token).catch(i=>!1)),y&&(t(12,m=y.flatMap(i=>{var S,j,q;return((q=(j=(S=i.model)==null?void 0:S.info)==null?void 0:j.meta)==null?void 0:q.tags)??[]}).map(i=>i.name)),t(12,m=Array.from(new Set(m)).sort((i,S)=>i.localeCompare(S))))});const pe=async i=>{const{reader:S,abortController:j}=r[i];j&&j.abort(),S&&(await S.cancel(),delete r[i],ge.set({...r}),await Pt(localStorage.token,i),ue.success(`${i} download has been canceled`))};function $e(){P=this.value,t(8,P)}const ye=i=>{if(i.code==="Enter"&&l.length>0){t(0,b=l[ee].value),t(11,_=!1);return}else i.code==="ArrowDown"?t(15,ee=Math.min(ee+1,l.length-1)):i.code==="ArrowUp"?t(15,ee=Math.max(ee-1,0)):t(15,ee=0);const S=document.querySelector('[data-arrow-selected="true"]');S==null||S.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})},Ee=()=>{t(9,te="")},Me=i=>{t(9,te=i)};function De(i){ht[i?"unshift":"push"](()=>{f=i,t(10,f)})}const Ce=(i,S)=>{t(0,b=i.value),t(15,ee=S),t(11,_=!1)},Ve=()=>{_e()},Ie=i=>{pe(i)},Ne=async()=>{Ue.set(!p),await Rt("/");const i=document.getElementById("new-chat-button");setTimeout(()=>{i==null||i.click()},0),p?history.replaceState(null,"","?temporary-chat=true"):history.replaceState(null,"",location.pathname),t(11,_=!1)},Te=async()=>{t(8,P=""),t(15,ee=0),window.setTimeout(()=>{var i;return(i=document.getElementById("model-search-input"))==null?void 0:i.focus()},0)};function R(i){_=i,t(11,_)}return a.$$set=i=>{"id"in i&&t(1,O=i.id),"value"in i&&t(0,b=i.value),"placeholder"in i&&t(2,W=i.placeholder),"searchEnabled"in i&&t(3,V=i.searchEnabled),"searchPlaceholder"in i&&t(4,N=i.searchPlaceholder),"showTemporaryChatControl"in i&&t(5,Z=i.showTemporaryChatControl),"items"in i&&t(25,y=i.items),"className"in i&&t(6,B=i.className),"triggerClassName"in i&&t(7,C=i.triggerClassName),"$$scope"in i&&t(39,$=i.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&100663296&&t(13,A=y.find(i=>Yt(i.model)===s)??""),a.$$.dirty[0]&33555200&&t(16,l=P?ke.search(P).map(i=>i.item).filter(i=>{var S,j,q,F;return te===""?!0:(F=(q=(j=(S=i.model)==null?void 0:S.info)==null?void 0:j.meta)==null?void 0:q.tags)==null?void 0:F.map(U=>U.name).includes(te)}):y.filter(i=>{var S,j,q,F;return te===""?!0:(F=(q=(j=(S=i.model)==null?void 0:S.info)==null?void 0:j.meta)==null?void 0:q.tags)==null?void 0:F.map(U=>U.name).includes(te)}))},[b,O,W,V,N,Z,B,C,P,te,f,_,m,A,oe,ee,l,r,o,d,c,p,w,_e,pe,y,s,g,$e,ye,Ee,Me,De,Ce,Ve,Ie,Ne,Te,R,$]}class Bl extends gt{constructor(e){super(),_t(this,e,gl,hl,mt,{id:1,value:0,placeholder:2,searchEnabled:3,searchPlaceholder:4,showTemporaryChatControl:5,items:25,className:6,triggerClassName:7},null,[-1,-1])}}export{Bl as S,Al as e,Yt as i};
//# sourceMappingURL=Selector.BkHCHP2V.js.map
